<%- include('./partials/header')%>

<%- include('./partials/navbar') %>
 


  <!-- Profile Section -->
  <div class="max-w-5xl mx-auto mt-10 px-6">
    <div class=" flex items-center gap-4">
      <a href="/profile">
      <img
        class="w-14 h-14 object-cover rounded-full border-2 border-orange-400"
        src="<%=user.profilePic%>"
        alt="DP"
      />
      </a>
      <div>
        <h2 class="text-2xl font-semibold">
          Hello, <span class="text-orange-400"><%=user.name%></span> üëã
        </h2>
        <p class="text-zinc-400 text-sm">Share something today</p>
      </div>
    </div>

    <!-- Create Post -->
    <form class="mt-6" action="/post" method="post">
      <textarea
        class="w-full bg-zinc-800 border border-zinc-700 rounded-xl p-4 resize-none outline-none focus:ring-2 focus:ring-orange-400 transition"
        rows="4"
        name="content"
        placeholder="What's on your mind?"
      ></textarea>
      <button
        class="mt-3 bg-orange-500 hover:bg-orange-600 transition px-6 py-2 rounded-lg font-medium"
        type="submit"
      >
        post
      </button>
    </form>
  </div>

  <!-- Posts Section -->
  <div class="max-w-5xl mx-auto mt-12 mb-6 px-6">
    <h2 class="text-lg font-semibold mb-6 text-zinc-300">Your Blogs</h2>

    <% if (user.posts.length === 0) { %>
  <div class="text-center text-zinc-400 mt-6">
    <p class="text-lg font-medium">No posts yet</p>
    <p class="text-sm mt-2">Start sharing your thoughts with the world.</p>
  </div>
<% } %>
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
      
      <% user.posts.reverse().forEach((post)=>{ %>

      <div class="flex flex-col bg-zinc-800 rounded-2xl p-5 shadow-lg hover:shadow-orange-500/10 transition duration-300 border border-zinc-700">

        <p class="flex-grow text-zinc-300 text-sm leading-relaxed">
          <%= post.content %>
        </p>

        <div class="mt-4 text-sm text-zinc-400">
          <%= post.likes.length %> likes
        </div>

        <div class="flex justify-between mt-4 text-sm">
          <a
            class="hover:text-pink-400 transition"
            href="/like/<%=post._id%>"
          >
            <%= post.likes.some(id=>id.toString()===user._id.toString()) ? 'Like ‚ù§Ô∏è' : 'Like ü§ç' %>
          </a>
          <div class="flex gap-3">
            
  <a
            class="hover:text-blue-400 transition"
            href="/edit/<%=post._id%>"
          >
            Edit ‚úèÔ∏è
          </a>
          <a class="hover:text-red-500" href="/blog/<%=post._id%>">delete</a>
          </div>
        
        </div>

      </div>

      <% }) %>

    </div>
  </div>


<%- include('./partials/footer') %>
